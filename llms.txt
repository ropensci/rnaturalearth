# rnaturalearth

An R package to hold and facilitate interaction with [Natural
Earth](https://www.naturalearthdata.com/) map data.

This package provides :

- access to a pre-downloaded subset of Natural Earth v4.1.0 (March 2018)
  vector data commonly used in world mapping

- easy subsetting by countries and regions

- functions to download other Natural Earth vector and raster data

- a simple, reproducible and sustainable workflow from Natural Earth
  data to rnaturalearth enabling updating as new versions become
  available

- clarification of differences in world maps classified by countries,
  sovereign states and map units

- consistency with Natural Earth naming conventions so that
  rnaturalearth users can use Natural Earth documentation

- data in `sf` or `sv` formats

The [Natural Earth](https://www.naturalearthdata.com/) website
structures vector data by scale, category and type. These determine the
filenames of downloads. rnaturalearth uses this structure to facilitate
download (like an API).

## Install rnaturalearth

Install from CRAN :

``` r
install.packages("rnaturalearth")
```

or install the development version from GitHub using
[pak](https://github.com/r-lib/pak/).

``` r
pak::pkg_install("ropensci/rnaturalearth")
```

Data to support much of the package functionality are stored in two data
packages that you will be prompted to install when required if you do
not do so here.

``` r
pak::pkg_install("ropensci/rnaturalearthdata")
pak::pkg_install("ropensci/rnaturalearthhires")
```

## First usage

Here using `plot` as a simple, quick way to plot maps. Maps could also
be made with `ggplot2`, `tmap` or other options. All retrieval functions
accept an argument `returnclass = "sf"` to return package `sf` (Simple
Features) or `returnclass = "sv"` (SpatVector) objects.

``` r
library(rnaturalearth)

# world countries
plot(ne_countries())
Warning: plotting the first 9 out of 168 attributes; use max.plot = 168 to plot
all
```

![](reference/figures/README-unnamed-chunk-2-1.png)

``` r
# uk
plot(ne_countries(country = "united kingdom"))
Warning: plotting the first 10 out of 168 attributes; use max.plot = 168 to
plot all
```

![](reference/figures/README-unnamed-chunk-2-2.png)

``` r
# states, admin level1 boundaries
plot(ne_states(country = "spain"))
Warning: plotting the first 9 out of 121 attributes; use max.plot = 121 to plot
all
```

![](reference/figures/README-unnamed-chunk-2-3.png)

## Introductory vignette

``` r
vignette("rnaturalearth", package = "rnaturalearth")
```

## To download Natural Earth data not already in the package

There are a wealth of other data available at the [Natural
Earth](https://www.naturalearthdata.com/) website. `rnaturalearth` has
functions to help with download of these data.

The data available are outlined in the two tables below and online
[here](https://www.naturalearthdata.com/downloads/50m-physical-vectors/).

``` R
category   cultural 

category   physical 
```

Specify the `scale`, `category` and `type` of the vector you want as in
the examples below.

``` r
# lakes
lakes110 <- ne_download(scale = 110, type = "lakes", category = "physical")
plot(lakes110)

# rivers
rivers50 <- ne_download(
  scale = 50,
  type = "rivers_lake_centerlines",
  category = "physical",
  returnclass = "sf"
)

library(ggplot2)
library(sf)

ggplot(rivers50) +
  geom_sf() +
  theme_minimal()
```

## Details of different country definitions and scales

``` r
vignette("what-is-a-country", package = "rnaturalearth")
```

## Reproducible download of Natural Earth data into the package

[Script](https://github.com/ropensci/rnaturalearthdata/blob/master/data-raw/data_download_script.R)
used to get data into the accompanying data packages.

## Errors in the data?

If you believe there is an issue with data provided by [Natural
Earth](https://www.naturalearthdata.com/), please do not report it here.
We are not responsible for the accuracy or maintenance of Natural Earth
data. For any concerns regarding this data, please contact [Natural
Earth](https://www.naturalearthdata.com/).

## Acknowledgements

Thanks to [Lincoln Mullen](https://github.com/lmullen) for code
structure inspiration from
[USAboundaries](https://github.com/ropensci/USAboundaries), [Hadley
Wickham](https://github.com/hadley) for comments and prompting, [Bob
Rudis](https://github.com/hrbrmstr) for answers to stackoverflow
questions about downloading Natural Earth data into R. The [Natural
Earth team](https://www.naturalearthdata.com/about/contributors/) and
[Nathan Kelso](https://github.com/nvkelso) for providing such a great
resource.

## Potential future work

### Potential additional data

- Country synonyms lookup
  - dataframe with ISO3 and country synonyms
  - similar to
    <https://github.com/AndySouth/rworldmap/blob/master/data/countrySynonyms.rda>
- Country larger regions lookup
  - dataframe with ISO3 and membership of different regional groupings,
    e.g. continent, least developed countries etc.
  - similar to
    <https://github.com/AndySouth/rworldmap/blob/master/data/countryRegions.rda>

### Potential additional functions

- facilitate joining of user data to country boundaries
  - similar to
    <https://github.com/AndySouth/rworldmap/blob/master/R/joinCountryData2Map.R>
  - … but with a better name
  - similar allowing of join by ISO codes or names, with attempted
    synonym matching
  - similar reporting of country joining success and failure
- facilitate subsetting by country groupings
  - e.g. least developed countries etc.

# Package index

## All functions

- [`check_data_exist()`](http://ropensci.github.io/rnaturalearth/reference/check_data_exist.md)
  : check whether the requested data exist on Natural Earth

- [`check_rnaturalearthdata()`](http://ropensci.github.io/rnaturalearth/reference/check_rnaturalearthdata.md)
  : Check whether to install rnaturalearthdata and install if necessary

- [`check_rnaturalearthhires()`](http://ropensci.github.io/rnaturalearth/reference/check_rnaturalearthhires.md)
  : Check whether to install rnaturalearthhires and install if necessary

- [`check_scale()`](http://ropensci.github.io/rnaturalearth/reference/check_scale.md)
  : check that this scale is present in Natural Earth

- [`convert_spatial_class()`](http://ropensci.github.io/rnaturalearth/reference/convert_spatial_class.md)
  : Convert from/to sf/sv objects

- [`countries110`](http://ropensci.github.io/rnaturalearth/reference/countries.md)
  : world country polygons from Natural Earth

- [`df_layers_cultural`](http://ropensci.github.io/rnaturalearth/reference/df_layers_cultural.md)
  : list of cultural layers available from Natural Earth

- [`df_layers_physical`](http://ropensci.github.io/rnaturalearth/reference/df_layers_physical.md)
  : list of physical layers available from Natural Earth

- [`get_data()`](http://ropensci.github.io/rnaturalearth/reference/get_data.md)
  : Get data from within the package

- [`install_rnaturalearthdata()`](http://ropensci.github.io/rnaturalearth/reference/install_rnaturalearthdata.md)
  : Install the naturalearthdata package after checking with the user

- [`install_rnaturalearthhires()`](http://ropensci.github.io/rnaturalearth/reference/install_rnaturalearthhires.md)
  : Install the naturalearthhires package after checking with the user

- [`layer_name()`](http://ropensci.github.io/rnaturalearth/reference/layer_name.md)
  : Generate the layer name for a Natural Earth dataset

- [`make_dest_path()`](http://ropensci.github.io/rnaturalearth/reference/make_dest_path.md)
  : Create Destination File Path

- [`ne_coastline()`](http://ropensci.github.io/rnaturalearth/reference/ne_coastline.md)
  : Get natural earth world coastline

- [`ne_countries()`](http://ropensci.github.io/rnaturalearth/reference/ne_countries.md)
  : Get natural earth world country polygons

- [`ne_download()`](http://ropensci.github.io/rnaturalearth/reference/ne_download.md)
  : Download data from Natural Earth and (optionally) read into R

- [`ne_file_name()`](http://ropensci.github.io/rnaturalearth/reference/ne_file_name.md)
  : return a natural earth filename based on arguments

- [`ne_find_vector_data()`](http://ropensci.github.io/rnaturalearth/reference/ne_find_vector_data.md)
  : Return a dataframe of available vector layers on Natural Earth

- [`ne_load()`](http://ropensci.github.io/rnaturalearth/reference/ne_load.md)
  :

  load a Natural Earth vector that has already been downloaded to R
  using `ne_download`

- [`ne_states()`](http://ropensci.github.io/rnaturalearth/reference/ne_states.md)
  : Get natural earth world state (admin level 1) polygons

- [`normalize_type()`](http://ropensci.github.io/rnaturalearth/reference/normalize_type.md)
  : Normalize the type argument for Natural Earth datasets

- [`read_spatial_vector()`](http://ropensci.github.io/rnaturalearth/reference/read_spatial_vector.md)
  : Read Spatial Vector

- [`sanitize_gdal_url()`](http://ropensci.github.io/rnaturalearth/reference/sanitize_gdal_url.md)
  : Extracts the http URL from a VSIZIP URL

# Articles

### All vignettes

- [Finding
  data](http://ropensci.github.io/rnaturalearth/articles/finding-data.md):
- [Language support in
  rnaturalearth](http://ropensci.github.io/rnaturalearth/articles/language-support.md):
- [Introduction to
  rnaturalearth.](http://ropensci.github.io/rnaturalearth/articles/rnaturalearth.md):
- [What is a country
  ?](http://ropensci.github.io/rnaturalearth/articles/what-is-a-country.md):
